<!doctype html>
<html>
  <head>
    <title>Shield System Test</title>
    <script type="module">
      import { Game } from './public/src/core/game.js';

      window.addEventListener('DOMContentLoaded', async () => {
        console.log('Starting shield system test...');

        const game = new Game();
        window.game = game;

        await game.init();

        // Wait a bit for everything to load
        setTimeout(() => {
          // Start the game automatically
          game.startGame();

          setTimeout(() => {
            const player = game.player;

            console.log('=== Shield System Test ===');
            console.log(
              'Shields data loaded:',
              game.data.shields ? 'Yes' : 'No'
            );
            console.log('Player shields:', player.shields);
            console.log('Current shield index:', player.currentShieldIndex);

            const currentShield = player.getCurrentShield();
            console.log('Current shield:', currentShield);
            console.log('Shield defense:', player.getShieldDefense());

            // Test shield switching
            console.log('\n=== Testing Shield Switch ===');
            const initialIndex = player.currentShieldIndex;
            console.log('Initial shield index:', initialIndex);

            player.switchShield();
            console.log(
              'After switch, shield index:',
              player.currentShieldIndex
            );
            console.log('New current shield:', player.getCurrentShield());

            // Check HUD display
            setTimeout(() => {
              const shieldDisplay = document.querySelector('#shield-display');
              console.log('\n=== HUD Test ===');
              console.log(
                'Shield display element found:',
                shieldDisplay ? 'Yes' : 'No'
              );
              if (shieldDisplay) {
                console.log('Shield display content:', shieldDisplay.innerHTML);
              }
            }, 500);
          }, 2000);
        }, 5000);
      });
    </script>
  </head>
  <body>
    <h1>Shield System Test</h1>
    <p>Open browser console to see test results.</p>
    <p>
      Check that shields are loaded and can be switched, and appear in the HUD.
    </p>
  </body>
</html>
